@import '../Common/variables.less';

// 可配置变量
@golden-ratio: 1.618;
@main-card-width: 280px;
@main-card-height: @main-card-width * @golden-ratio;
@side-card-offset: @main-card-width * 1; // 增加偏移量
@side-card-scale: 0.75; // 稍微缩小侧边卡片
@side-card-perspective: 1200px; // 增加透视效果
@side-card-rotate: 35deg; // 稍微增加旋转角度
@side-card-opacity: 0.8;
@transition-duration: 0.5s;
@transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);

.monster-carousel {
    position: relative;
    width: 100vw; // 使用视口宽度
    max-width: 100%; // 确保不超过父容器宽度
    height: @main-card-height;
    perspective: @side-card-perspective;
    overflow: hidden;
    margin: 0 auto; // 居中显示
}

.monster-cards-container {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
}

.monster-card-wrapper {
    position: absolute;
    transition: all @transition-duration @transition-timing-function;
    opacity: 0;
    width: @main-card-width;
    height: @main-card-height;
    left: 50%;
    transform-origin: center center -(@main-card-width / 2);

    &.far-prev, &.far-next {
        display: none;
    }

    &.prev {
        transform: translateX(calc(-50% - @side-card-offset)) scale(@side-card-scale) rotateY(@side-card-rotate);
        opacity: @side-card-opacity;
        z-index: 1;
    }

    &.current {
        transform: translateX(-50%) scale(1) rotateY(0);
        opacity: 1;
        z-index: 2;
    }

    &.next {
        transform: translateX(calc(-50% + @side-card-offset)) scale(@side-card-scale) rotateY(-@side-card-rotate);
        opacity: @side-card-opacity;
        z-index: 1;
    }
}

.monster-cards-container.loaded {
    .monster-card-wrapper {
        transition: all @transition-duration @transition-timing-function;
        
        &.prev, &.next {
            opacity: @side-card-opacity;
        }

        &.far-prev, &.far-next {
            opacity: 0;
        }
    }
}

.monster-cards-container.slide-left {
    .prev { 
        transform: translateX(calc(-50% - @side-card-offset * 2)) scale(@side-card-scale) rotateY(@side-card-rotate);
        opacity: 0;
        z-index: 0;
    }
    .current { 
        transform: translateX(calc(-50% - @side-card-offset)) scale(@side-card-scale) rotateY(@side-card-rotate);
        opacity: @side-card-opacity;
        z-index: 1;
    }
    .next { 
        transform: translateX(-50%) scale(1) rotateY(0);
        opacity: 1;
        z-index: 2;
    }
}

.monster-cards-container.slide-right {
    .prev { 
        transform: translateX(-50%) scale(1) rotateY(0);
        opacity: 1;
        z-index: 2;
    }
    .current { 
        transform: translateX(calc(-50% + @side-card-offset)) scale(@side-card-scale) rotateY(-@side-card-rotate);
        opacity: @side-card-opacity;
        z-index: 1;
    }
    .next { 
        transform: translateX(calc(-50% + @side-card-offset * 2)) scale(@side-card-scale) rotateY(-@side-card-rotate);
        opacity: 0;
        z-index: 0;
    }
}

.monster-cards-container.no-transition {
    .monster-card-wrapper {
        transition: none;
    }
}

// 移动设备适配
@media (max-width: 768px) {
    @main-card-width: 220px;
    @main-card-height: @main-card-width * @golden-ratio;
    @side-card-offset: @main-card-width * 0.8; // 调整移动设备的偏移量

    .monster-carousel {
        height: @main-card-height;
    }

    .monster-card-wrapper {
        width: @main-card-width;
        height: @main-card-height;
    }

    .monster-card-wrapper {
        &.prev {
            transform: translateX(calc(-50% - @side-card-offset)) scale(@side-card-scale) rotateY(@side-card-rotate);
        }

        &.next {
            transform: translateX(calc(-50% + @side-card-offset)) scale(@side-card-scale) rotateY(-@side-card-rotate);
        }
    }
}

// 大屏幕适配
@media (min-width: 1200px) {
    @main-card-width: 320px;
    @main-card-height: @main-card-width * @golden-ratio;
    @side-card-offset: @main-card-width * 1.1; // 增加大屏幕的偏移量

    .monster-carousel {
        height: @main-card-height;
    }

    .monster-card-wrapper {
        width: @main-card-width;
        height: @main-card-height;
    }

    .monster-card-wrapper {
        &.prev {
            transform: translateX(calc(-50% - @side-card-offset)) scale(@side-card-scale) rotateY(@side-card-rotate);
        }

        &.next {
            transform: translateX(calc(-50% + @side-card-offset)) scale(@side-card-scale) rotateY(-@side-card-rotate);
        }
    }
}
